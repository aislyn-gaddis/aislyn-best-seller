"0","start_date <- as.Date(""2011-02-13"")"
"0","end_date <- as.Date(""2023-11-05"")"
"0",""
"0","dates <- seq(start_date, end_date, by = ""week"")"
"0",""
"0","dfs <- map_dfr(dates, function(date) {"
"0","  url <- sprintf(""https://www.nytimes.com/books/best-sellers/%s/combined-print-and-e-book-fiction/"", format(date, ""%Y/%m/%d""))"
"0","  "
"0","  page <- tryCatch(read_html(url), error = function(e) NULL)"
"0","  "
"0","  if (!is.null(page)) {"
"0","    titles <- page %>%"
"0","    html_nodes("".css-5pe77f"") %>%"
"0","    html_text()"
"0",""
"0","    authors <- page %>%"
"0","    html_nodes("".css-hjukut"") %>%"
"0","    html_text()"
"0","    "
"0","    ranks <- seq_along(titles)"
"0","    "
"0","    data.frame(title = titles, author = authors, rank = ranks, date = date)"
"0","  } else {"
"0","    NULL"
"0","  }"
"0","})"
"0",""
"0","dfs |> write_rds(""data-raw/bestsellers-combined-web-scrape.rds"")"
"0",""
"0","bestsellers_combined <- read_rds(""data-raw/bestsellers-combined-web-scrape.rds"") "
"0",""
"0","bestsellers_combined |> glimpse()"
"1","Rows: 9,975"
"1",""
"1","
"
"1","Columns: 4"
"1",""
"1","
"
"1","$ title  [3m[38;5;246m<chr>[39m[23m ""TICK TOCK"", ""THE GIRL WITH THE DRAGON TATTOO"", ""THE GIRL WHO PLAYED WITH FIRE"", ""THE GIRL WHO KICKED THE HORNETâ€™S NEST"", â€¦
$ author [3m[38;5;246m<chr>[39m[23m ""by James Patterson and Michael Ledwidge"", ""by Stieg Larsson"", ""by Stieg Larsson"", ""by Stieg Larsson"", ""by Sara Gruen"", ""bâ€¦
$ rank   [3m[38;5;246m<int>[39m[23m 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1, 2, 3, 4, 5, 6, 7,â€¦
$ date   [3m[38;5;246m<date>[39m[23m 2011-02-13, 2011-02-13, 2011-02-13, 2011-02-13, 2011-02-13, 2011-02-13, 2011-02-13, 2011-02-13, 2011-02-13, 2011-02-13, 2â€¦"
"1",""
"1","
"
